<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="StormPMC - Military-grade asset tracking solutions built for extreme environments. Ruggedized GPS trackers, gateways, and accessories.">
    <title>StormPMC | Total Asset Awareness</title>
    
    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- GSAP & SCROLLTRIGGER -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- MAIN STYLESHEET -->
    <link rel="stylesheet" href="styles.css">

    <!-- BACKUP: If you need to revert to inline styles, paste the contents of styles.css below 
    <style>
         PASTE CSS HERE 
    </style>
    -->

</head>
<body>

    <!-- CUSTOM CERAMIC CURSOR -->
    <div id="wikd-cursor">
        <div class="cursor-body"></div>
    </div>

    <!-- Background Gradient -->
    <div class="hero-bg-gradient"></div>

    <!-- Navigation -->
    <nav class="nav">
        <a href="index.html" class="logo">
            <div class="logo-icon">S</div>
            STORMPMC
        </a>
        <div class="nav-right">
            <a href="contact.html" class="nav-btn" data-mobile-text="Sales">Contact Sales</a>
        </div>
    </nav>

    <!-- Header Content -->
    <div class="fixed-header-bg" id="parallaxTitle">
        <!-- Mouse Glow -->
        <div class="glow-orb" id="mouseGlow"></div>

        <h1 class="hero-title-container">
            <span class="hero-title-line">Total Asset</span>
            <span class="hero-title-line">Awareness</span>
        </h1>
    </div>

    <!-- Scrolling Content Layer -->
    <main class="scrolling-layer">
        
        <!-- Hero Image Section -->
        <section class="hero-section" id="hero">
            <!-- Anchor Gradient -->
            <div class="hero-internal-blend"></div>
            
            <div class="hero-grid-overlay" id="parallaxGrid"></div>
            
            <div class="product-image-container loading-state" id="heroImageContainer">
                <img 
                    src="https://github.com/WIKDMotorsports/Misc/blob/main/Productrenders/MTRAC/HEROMVP.png?raw=true" 
                    alt="MTRAC Asset Tracking Device"
                    fetchpriority="high"
                    loading="eager"
                    id="heroImage"
                >
            </div>
        </section>

        <!-- Technical Specs Bar -->
        <section class="stats-bar" id="stats">
            <div class="container">
                <div class="stats-grid">
                    <!-- Set 1 -->
                    <div class="stat-item">
                        <span class="stat-value">
                            <span class="desktop-text">10+ Years</span>
                            <span class="mobile-text">10+ Year Battery</span>
                        </span>
                        <span class="stat-label">Battery Life</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">-40° to +85°C</span>
                        <span class="stat-label">Operating Range</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">IP69K</span>
                        <span class="stat-label">Ingress Protection</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">MIL-STD-810H</span>
                        <span class="stat-label">Certified</span>
                    </div>

                    <!-- Set 2 (Ticker Mobile) -->
                    <div class="stat-item ticker-duplicate">
                        <span class="stat-value">
                            <span class="desktop-text">10+ Years</span>
                            <span class="mobile-text">10+ Year Battery</span>
                        </span>
                        <span class="stat-label">Battery Life</span>
                    </div>
                    <div class="stat-item ticker-duplicate">
                        <span class="stat-value">-40° to +85°C</span>
                        <span class="stat-label">Operating Range</span>
                    </div>
                    <div class="stat-item ticker-duplicate">
                        <span class="stat-value">IP69K</span>
                        <span class="stat-label">Ingress Protection</span>
                    </div>
                    <div class="stat-item ticker-duplicate">
                        <span class="stat-value">MIL-STD-810H</span>
                        <span class="stat-label">Certified</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- MISSION SECTION -->
        <section class="section">
            <div class="container">
                <div class="section-header reveal" style="max-width: 800px;">
                    <span class="section-label">Our Mission</span>
                    <h2 class="section-title">Visibility Without Compromise</h2>
                    <p class="section-subtitle" style="font-size: 18px; color: var(--color-text-primary); opacity: 0.9;">
                        StormPMC delivers reliable asset awareness in extreme and denied environments. Designed and built by veterans with firsthand operational experience, our products meet military standards because real-world missions demand nothing less.
                    </p>
                </div>
            </div>
        </section>

        <!-- Flagship System -->
        <section class="section">
            <div class="container">
                <div class="flagship-grid">
                    <div class="flagship-image reveal">
                        <img src="https://github.com/WIKDMotorsports/Misc/blob/main/Productrenders/MTRAC/In%20Case-Camera%203.png?raw=true" alt="MTRAC Asset Tracker Primary Visual">
                    </div>
                    <div class="flagship-content reveal">
                        <span class="section-label">Flagship System</span>
                        <h1 class="section-title">MTRAC Asset Tracker</h1>
                        <p class="section-subtitle" style="margin-bottom: 40px;">Our primary military-grade asset tracker engineered for long-duration operations in austere and contested environments. MTRAC delivers decade-long battery life, resilient communications, and full MIL-STD-810H certification.</p>
                        <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                            <a href="contact.html" class="btn btn-primary" data-mobile-text="Details">Request Details</a>
                            <a href="MTRAC.html#specifications" class="btn btn-secondary" data-mobile-text="Docs">Documentation</a>
                        </div>
                    </div>
                </div>

                <!-- Expansion Accordion -->
                <div class="ecosystem-container reveal">
                    <button class="collapsible-trigger" id="expandBtn">
                        <span class="trigger-text" data-mobile-text="Ecosystem & Future">View Ecosystem Expansion & Future Products</span>
                        <span class="icon">+</span>
                    </button>
                    <div class="collapsible-content" id="expandContent">
                        <div style="margin-bottom: 24px; color: var(--color-text-tertiary); font-size: 14px; border-bottom: 1px solid var(--color-border); padding-bottom: 16px;">
                            A complete ecosystem of ruggedized tracking hardware designed to work together in the world's most demanding environments.
                        </div>
                        <div class="expansion-grid">
                            <div class="expansion-category">
                                <span class="expansion-header green">Asset Trackers</span>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">MTRAC <span class="badge-green">Flagship</span></h3>
                                    <p class="expansion-desc">Our flagship ruggedized tracker with 10-year battery, global satellite connectivity, and full MIL-STD-810H certification.</p>
                                </div>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">MTRAC Lite <span class="badge-green">Coming Soon</span></h3>
                                    <p class="expansion-desc">Compact tracker for smaller assets and equipment. Same rugged DNA in a lighter form factor.</p>
                                </div>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">MTRAC Container <span class="badge-green">Coming Soon</span></h3>
                                    <p class="expansion-desc">Specialized tracker for shipping containers with door sensors and tamper detection.</p>
                                </div>
                            </div>

                            <div class="expansion-category">
                                <span class="expansion-header magenta">Gateways</span>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">Storm Gateway <span class="badge-magenta">Coming Soon</span></h3>
                                    <p class="expansion-desc">Long-range mesh gateway for remote deployments. Creates robust network coverage in challenging terrain.</p>
                                </div>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">Gateway Mobile <span class="badge-magenta">Coming Soon</span></h3>
                                    <p class="expansion-desc">Vehicle-mounted gateway for mobile command posts and convoy operations.</p>
                                </div>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">Gateway Solar <span class="badge-magenta">Coming Soon</span></h3>
                                    <p class="expansion-desc">Self-powered gateway with integrated solar panel for off-grid installations.</p>
                                </div>
                            </div>
                            
                            <div class="expansion-category">
                                <span class="expansion-header white">Accessories</span>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">Power Pack <span class="badge-white">Coming Soon</span></h3>
                                    <p class="expansion-desc">Extended battery module for multi-year deployments where replacement isn't an option.</p>
                                </div>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">Universal Mount <span class="badge-white">Coming Soon</span></h3>
                                    <p class="expansion-desc">Heavy-duty mounting solutions for any surface. Includes bolt-on and magnetic options.</p>
                                </div>
                            </div>

                            <div class="expansion-category">
                                <span class="expansion-header white">StormCloud Platform</span>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">Real-Time Dashboard</h3>
                                    <p class="expansion-desc">Unified view of all assets with live location updates, status monitoring, and customizable alerts.</p>
                                </div>
                                <div class="expansion-item">
                                    <h3 class="expansion-name">API Integration</h3>
                                    <p class="expansion-desc">RESTful API for seamless integration with existing logistics, ERP, and asset management systems.</p>
                                </div>
                            </div>
                        </div>

                        <div class="collapse-footer">
                            <button id="collapseBtnBottom" style="background: none; border: none; color: var(--color-text-tertiary); font-family: var(--font-display); font-size: 14px; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; padding: 10px; transition: color 0.3s ease;">
                                ↑ Collapse Section
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FEATURES SECTION -->
        <section class="section">
            <div class="container">
                <div class="section-header reveal">
                    <span class="section-label">System Capabilities</span>
                    <h2 class="section-title">Engineered for<br>Mission Criticality</h2>
                    <p class="section-subtitle">When standard tracking fails, StormPMC delivers. Built from the ground up for operations where failure is not an option.</p>
                </div>
                
                <div class="features-grid reveal">
                    <div class="card">
                        <div class="card-content">
                            <div class="card-header">
                                <h3 class="card-title">Extreme Durability</h3>
                            </div>
                            <p class="card-text">MIL-STD-810H certified to withstand shock, vibration, and extreme temperatures from -40°C to +85°C.</p>
                        </div>
                        <div class="card-visual">
                            <img src="https://github.com/WIKDMotorsports/Misc/blob/main/renders2/stylized/Durability.png?raw=true" alt="Extreme Durability">
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-content">
                            <div class="card-header">
                                <h3 class="card-title">Decade-Long Battery</h3>
                            </div>
                            <p class="card-text">Advanced power management delivers 10+ years of operation on a single battery in typical use cases.</p>
                        </div>
                        <div class="card-visual">
                             <img src="https://github.com/WIKDMotorsports/Misc/blob/main/renders2/stylized/Decade-Long%20Battery.png?raw=true" alt="Decade-Long Battery">
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-content">
                            <div class="card-header">
                                <h3 class="card-title">Global Coverage</h3>
                            </div>
                            <p class="card-text">Satellite connectivity ensures tracking anywhere on Earth—from dense urban environments to remote wilderness.</p>
                        </div>
                        <div class="card-visual">
                             <img src="https://github.com/WIKDMotorsports/Misc/blob/main/renders2/stylized/Global.png?raw=true" alt="Global Coverage">
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-content">
                            <div class="card-header">
                                <h3 class="card-title">IP69K Sealed</h3>
                            </div>
                            <p class="card-text">Fully sealed against water, dust, and high-pressure wash-downs. Submersible to specified depths.</p>
                        </div>
                        <div class="card-visual">
                             <img src="https://github.com/WIKDMotorsports/Misc/blob/main/renders2/stylized/IP%20Rated.png?raw=true" alt="IP69K Sealed">
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-content">
                            <div class="card-header">
                                <h3 class="card-title">Mesh Networking</h3>
                            </div>
                            <p class="card-text">Devices communicate via encrypted mesh network, extending range and ensuring data delivery.</p>
                        </div>
                        <div class="card-visual">
                             <img src="https://github.com/WIKDMotorsports/Misc/blob/main/renders2/stylized/Mesh%20Networking.png?raw=true" alt="Mesh Networking">
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-content">
                            <div class="card-header">
                                <h3 class="card-title">Real-Time Platform</h3>
                            </div>
                            <p class="card-text">Cloud-based command center provides real-time visibility, alerts, and analytics across your entire fleet.</p>
                        </div>
                        <div class="card-visual">
                             <img src="https://github.com/WIKDMotorsports/Misc/blob/main/renders2/stylized/Real-Time%20Platform.png?raw=true" alt="Real-Time Platform">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Industries -->
        <section class="section">
            <div class="container">
                <div class="section-header reveal">
                    <span class="section-label">Industries</span>
                    <h2 class="section-title">Trusted Across Sectors</h2>
                </div>
                
                <div class="industries-grid reveal">
                    <div class="industry-card">
                        <div class="card-image">
                            <img src="https://github.com/WIKDMotorsports/Misc/blob/main/Productrenders/Industries/Military_With_Gateway_Rim_light-Camera%202.png?raw=true" alt="Military Sector">
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">Defense & Military</h3>
                            <p class="card-text">Track high-value equipment across global operations.</p>
                            <a href="MTRAC.html#industries" class="card-link">Learn More &rarr;</a>
                        </div>
                    </div>
                    <div class="industry-card">
                        <div class="card-image">
                            <img 
                                src="Optimized Images/Industries/Energy-Camera.webp" 
                                onerror="this.onerror=null; this.src='https://github.com/WIKDMotorsports/StormMVPmini/blob/main/Optimized%20Images/Industries/Energy-Camera.webp?raw=true'"
                                alt="Energy Sector"
                            >
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">Energy & Utilities</h3>
                            <p class="card-text">Monitor remote infrastructure and pipeline equipment.</p>
                            <a href="MTRAC.html#industries" class="card-link">Learn More &rarr;</a>
                        </div>
                    </div>
                    <div class="industry-card">
                        <div class="card-image">
                            <img 
                                src="Optimized Images/Industries/Construction_1-Camera 2.webp" 
                                onerror="this.onerror=null; this.src='https://github.com/WIKDMotorsports/StormMVPmini/blob/main/Optimized%20Images/Industries/Construction_1-Camera%202.webp?raw=true'"
                                alt="Heavy Equipment Sector"
                            >
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">Heavy Equipment</h3>
                            <p class="card-text">Track construction and mining equipment in rugged conditions.</p>
                            <a href="MTRAC.html#industries" class="card-link">Learn More &rarr;</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="section cta-section">
            <div class="container">
                <div class="cta-content reveal">
                    <h2 class="cta-title">Ready to Get Started?</h2>
                    <p class="cta-text">Connect with our team to discuss your tracking requirements.</p>
                    <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                        <a href="contact.html" class="btn btn-primary" data-mobile-text="Sales">Contact Sales</a>
                        <a href="MTRAC.html#overview" class="btn btn-secondary" data-mobile-text="Explore">Explore MTRAC</a>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>© 2025 StormPMC. HIGH-ASSET RELIABILITY.</p>
                <p>MIL-STD-810H CERTIFIED SYSTEMS</p>
            </div>
        </div>
    </footer>

    <script>
        // -----------------------------------------------------------------
        // CUSTOM CERAMIC CURSOR LOGIC
        // -----------------------------------------------------------------
        const cursor = document.getElementById('wikd-cursor');
        const heroSection = document.getElementById('hero');
        const navBar = document.querySelector('.nav');
        
        let mouseX = 0, mouseY = 0;
        let posX = 0, posY = 0;
        let isCursorActive = false;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;

            // Visibility Logic: Only show when hovering the hero area, NOT the nav
            const isOverHeroArea = e.target.closest('#hero') || 
                                   e.target.closest('#parallaxTitle');
            const isOverNav = e.target.closest('.nav');
            
            // Only show custom cursor if over the hero area AND NOT over the nav
            if (isOverHeroArea && !isOverNav && window.innerWidth > 1024) {
                cursor.style.opacity = "1";
            } else {
                cursor.style.opacity = "0";
            }
        });

        // Smooth movement loop
        function updateCursorPosition() {
            // Immediate follow, no lag
            posX = mouseX;
            posY = mouseY;
            
            const activeScale = cursor.classList.contains('active') ? 1.4 : 1;
            cursor.style.transform = `translate3d(${posX - 12}px, ${posY - 12}px, 0) scale(${activeScale})`;
            
            requestAnimationFrame(updateCursorPosition);
        }
        updateCursorPosition();

        // Hover Effects (Active State)
        document.addEventListener('mouseover', (e) => {
            if (e.target.closest('a') || e.target.closest('button')) {
                cursor.classList.add('active');
            }
        });

        document.addEventListener('mouseout', (e) => {
            if (e.target.closest('a') || e.target.closest('button')) {
                cursor.classList.remove('active');
            }
        });

        // Click visual feedback
        document.addEventListener('mousedown', () => {
            if (cursor.style.opacity === "1") {
                cursor.style.transform += ' scale(0.8)';
            }
        });

        // -----------------------------------------------------------------
        // MOBILE TEXT SWAPPING
        // -----------------------------------------------------------------
        const swapText = () => {
            const isMobile = window.innerWidth <= 768;
            document.querySelectorAll('[data-mobile-text]').forEach(el => {
                if (!el.dataset.desktopText) el.dataset.desktopText = el.innerText;
                el.innerText = isMobile ? el.dataset.mobileText : el.dataset.desktopText;
            });
        };
        swapText();
        window.addEventListener('resize', swapText);

        // -----------------------------------------------------------------
        // COLLAPSIBLE LOGIC
        // -----------------------------------------------------------------
        const expandBtn = document.getElementById('expandBtn');
        const expandContent = document.getElementById('expandContent');
        const collapseBtnBottom = document.getElementById('collapseBtnBottom');

        function toggleExpansion() {
            expandBtn.classList.toggle('active');
            const isOpen = expandContent.classList.toggle('open'); // Capture state
            expandBtn.querySelector('.icon').textContent = isOpen ? '×' : '+';
            
            if (isOpen) {
                // GSAP Open Animation
                gsap.to(expandContent, { 
                    height: "auto", 
                    duration: 0.6, 
                    ease: "power2.inOut" 
                });

                // Content Reveal Sequence
                // Updated selector to target .collapse-footer (the div with the border)
                const elementsToAnimate = expandContent.querySelectorAll('.expansion-header, .expansion-item, .collapse-footer');
                
                gsap.fromTo(elementsToAnimate, 
                    { 
                        opacity: 0, 
                        y: 20, 
                        filter: "blur(10px)" 
                    }, 
                    { 
                        opacity: 1, 
                        y: 0, 
                        filter: "blur(0px)", 
                        duration: 0.5, 
                        stagger: 0.03, 
                        ease: "power2.out",
                        delay: 0.1 
                    }
                );
            } else {
                // GSAP Close Animation
                gsap.to(expandContent, { 
                    height: 0, 
                    duration: 0.5, 
                    ease: "power2.inOut" 
                });
            }
        }

        if (expandBtn) expandBtn.addEventListener('click', toggleExpansion);
        if (collapseBtnBottom) {
            collapseBtnBottom.addEventListener('click', () => {
                if (expandContent.classList.contains('open')) {
                    toggleExpansion();
                    const offset = 100; 
                    const bodyRect = document.body.getBoundingClientRect().top;
                    const elementRect = expandBtn.getBoundingClientRect().top;
                    const offsetPosition = (elementRect - bodyRect) - offset;
                    window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
                }
            });
        }

        // -----------------------------------------------------------------
        // GSAP & PARALLAX ANIMATION
        // -----------------------------------------------------------------
        gsap.registerPlugin(ScrollTrigger);

        // Intro Complete Flag to coordinate animations
        let introComplete = false;

        // 1. HERO TEXT ENTRANCE (INSTANT EXECUTION)
        // No event listeners. Fire immediately.
        const textTl = gsap.timeline({
            delay: 0.1, // Single frame delay to prevent layout thrashing
            onComplete: () => {
                introComplete = true; // Signal completion for mouse loop
                initScrollTrigger(); // Hook scroll logic after entrance
            }
        });
        
        // 0. Background & Glow (Start immediately)
        textTl.to(".hero-bg-gradient", { opacity: 1, duration: 0.8, ease: "power2.out" }, 0);
        textTl.to(".glow-orb", { opacity: 1, scale: 1, duration: 0.8, ease: "power2.out" }, 0);

        // Grid Animation - Start slightly before or with text
        const isMobile = window.innerWidth <= 1024;
        textTl.fromTo(".hero-grid-overlay", 
            {
                opacity: 0,
                y: 50,
                filter: "blur(10px)"
            },
            {
                opacity: isMobile ? 0.5 : 1, 
                y: 0,
                filter: "blur(0px)",
                duration: 0.6,
                ease: "power3.out"
            }, 0); 
        
        // Nav Icon & Logo Text (Whole Unit)
        textTl.to(".logo", 
            { opacity: 1, y: 0, filter: "blur(0px)", duration: 0.4, ease: "power4.out" },
            0
        );

        // Nav Button
        textTl.to(".nav-btn", 
            { opacity: 1, y: 0, filter: "blur(0px)", duration: 0.4, ease: "power4.out" },
            0
        );

        textTl.fromTo(".hero-title-line", 
            {
                opacity: 0,
                y: 30,
                filter: "blur(15px)"
            },
            {
                opacity: 1,
                y: 0,
                filter: "blur(0px)",
                duration: 0.5,
                stagger: 0.05, 
                ease: "power4.out"
            }, 0.1); 

        // Flag to track minimum delay for aesthetics
        let minDelayPassed = false;
        setTimeout(() => { minDelayPassed = true; tryRevealImage(); }, 100);

        function initScrollTrigger() {
            if (window.innerWidth > 1024) {
                gsap.to(".hero-title-line", {
                    scrollTrigger: {
                        trigger: ".hero-section",
                        start: "top top",
                        end: "bottom top",
                        scrub: true
                    },
                    y: 150,
                    opacity: 0,
                    filter: "blur(20px)",
                    stagger: 0.1,
                    overwrite: 'auto' 
                });
            }
        }

        // 2. GLOBAL LENS FOCUS ENTRANCE
        const revealElements = document.querySelectorAll(".reveal");
        revealElements.forEach((el) => {
            gsap.fromTo(el, 
                { 
                    opacity: 0, 
                    filter: "blur(15px)", 
                    y: 40,
                    scale: 0.95 
                }, 
                {
                    opacity: 1, 
                    filter: "blur(0px)", 
                    y: 0,
                    scale: 1,
                    duration: 0.5, 
                    ease: "power3.out", 
                    scrollTrigger: {
                        trigger: el,
                        start: "top 85%", 
                        toggleActions: "play none none none"
                    }
                }
            );
        });

        // 4. HERO IMAGE & STATS BAR SMART REVEAL
        const heroImg = document.getElementById('heroImage');
        const heroContainer = document.getElementById('heroImageContainer');
        let imageRevealed = false;

        const tryRevealImage = () => {
            // Only reveal if BOTH: Image is loaded AND Minimum 0.1s text delay has passed
            if (heroImg.complete && minDelayPassed && !imageRevealed) {
                imageRevealed = true;
                
                // Master Reveal Timeline
                const masterTl = gsap.timeline({
                    onStart: () => {
                        heroContainer.classList.remove('loading-state');
                    }
                });

                // Image Reveal
                masterTl.fromTo(heroImg, 
                    {
                        opacity: 0,
                        scale: 0.9,
                        y: 30,
                        filter: "blur(20px) brightness(0.5)"
                    },
                    {
                        opacity: 1,
                        scale: 1,
                        y: 0,
                        filter: "blur(0px) brightness(1)",
                        duration: 0.7, 
                        ease: "power4.out"
                    }, 0); 

                // Stats Bar Reveal (Sync with Image)
                masterTl.fromTo(".stat-item", 
                    { 
                        y: 20, 
                        opacity: 0, 
                        filter: "blur(8px)" 
                    },
                    {
                        y: 0,
                        opacity: 1,
                        filter: "blur(0px)",
                        duration: 0.4,
                        stagger: 0.03, // Faster stagger
                        ease: "power3.out"
                    }, 0.1); 
            }
        };

        // Check if cached instantly
        if (heroImg.complete) {
            tryRevealImage();
        } 
        // Or wait for load event
        heroImg.onload = tryRevealImage;

        // -----------------------------------------------------------------
        // MOUSE ORB & GRID PARALLAX (IDLE ANIMATION)
        // -----------------------------------------------------------------
        const grid = document.getElementById('parallaxGrid');
        const orb = document.getElementById('mouseGlow');
        const title = document.getElementById('parallaxTitle');

        let targetOrbX = window.innerWidth / 2;
        let targetOrbY = window.innerHeight / 2;
        let currentOrbX = targetOrbX;
        let currentOrbY = targetOrbY;
        
        let targetScroll = 0;
        let currentScroll = 0;
        const lerpAmount = 0.07; 

        let lastMouseMoveTime = 0;
        const idleDelay = 1000;
        const isTouch = window.matchMedia('(hover: none)').matches;

        window.addEventListener('mousemove', (e) => {
            targetOrbX = e.clientX;
            targetOrbY = e.clientY;
            lastMouseMoveTime = Date.now();
        });

        window.addEventListener('scroll', () => {
            targetScroll = window.pageYOffset || document.documentElement.scrollTop;
        }, { passive: true });

        function animate() {
            const now = Date.now();
            const time = now * 0.001;
            const isIdle = (now - lastMouseMoveTime > idleDelay) || isTouch;

            if (isIdle) {
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;
                const rangeX = window.innerWidth * 0.3;
                const rangeY = window.innerHeight * 0.2;
                targetOrbX = centerX + Math.sin(time * 0.5) * rangeX;
                targetOrbY = centerY + Math.cos(time * 0.35) * rangeY;
            }

            currentOrbX += (targetOrbX - currentOrbX) * lerpAmount;
            currentOrbY += (targetOrbY - currentOrbY) * lerpAmount;
            currentScroll += (targetScroll - currentScroll) * lerpAmount;
            
            if (orb) orb.style.transform = `translate3d(calc(${currentOrbX}px - 50%), calc(${currentOrbY}px - 50%), 0)`;
            
            // Logic Split: Desktop Parallax vs Mobile Pinning
            if (window.innerWidth > 1024) {
                 // DESKTOP: Apply parallax only to GRID (Title handled by GSAP now)
                 if (grid && !isTouch) grid.style.transform = `translate3d(0, ${currentScroll * 0.5}px, 0)`;
                 
                 // Fade Orb only
                 const fadeDistance = 600; 
                 const opacity = Math.max(0, 1 - (currentScroll / fadeDistance));
                 // Only control opacity after intro is complete
                 if (introComplete && orb) orb.style.opacity = opacity;
            } else {
                 // MOBILE: Disable title parallax, keep opacity full so it stays pinned visibly
                 if (introComplete && orb) orb.style.opacity = 0.6;
                 if (title) {
                    title.style.opacity = 1; 
                    title.style.transform = 'translate3d(0,0,0)'; // Reset transform
                 }
            }

            requestAnimationFrame(animate);
        }
        animate();

        // Lighting Engine (Cards)
        if (!isTouch) {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                const visual = card.querySelector('.card-visual');
                if (!visual) return;
                card.addEventListener('mousemove', (e) => {
                    const rect = visual.getBoundingClientRect();
                    visual.style.setProperty('--mouse-x', `${e.clientX - rect.left}px`);
                    visual.style.setProperty('--mouse-y', `${e.clientY - rect.top}px`);
                });
            });
        }

        // Scroll Intersection (Touch Hover Fallback)
        if (isTouch || window.innerWidth <= 1024) {
            const scrollObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('is-hovered');
                    else entry.target.classList.remove('is-hovered');
                });
            }, { rootMargin: '-15% 0px -15% 0px', threshold: 0.1 });

            document.querySelectorAll('.card, .industry-card').forEach(card => scrollObserver.observe(card));
        }
    </script>
</body>
</html>
